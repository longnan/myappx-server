# ============================================================================
# PostgreSQL Configuration File
# ============================================================================
# Version: PostgreSQL 118
# Environment: Docker Container
# OS: Linux
# Application: WEB Application
# 
# System Resources:
#   Memory: 2GB
#   CPU Cores: 1
#   Max Connections: 100
#   Storage: SSD
# ============================================================================

# ============================================================================
# Connection Settings
# ============================================================================
# Listen on all available IP addresses
listen_addresses = '*'

# Maximum number of concurrent connections
max_connections = 100

# ============================================================================
# Memory Configuration
# ============================================================================
# Shared memory used by PostgreSQL for caching data
# Recommended: 25% of total RAM for dedicated server
shared_buffers = 512MB

# Estimated memory available for disk caching by the OS
# Recommended: 50-75% of total RAM
effective_cache_size = 1536MB

# Memory used for maintenance operations (VACUUM, CREATE INDEX, etc.)
maintenance_work_mem = 128MB

# Memory used for each sort/hash operation
# Formula: (RAM - shared_buffers) / (max_connections * 2)
work_mem = 5242kB

# ============================================================================
# Write-Ahead Logging (WAL) Configuration
# ============================================================================
# Amount of memory used for WAL data before writing to disk
wal_buffers = 16MB

# Minimum size to shrink WAL to
min_wal_size = 1GB

# Maximum size to let the WAL grow to between automatic checkpoints
max_wal_size = 4GB

# ============================================================================
# Query Planner Configuration
# ============================================================================
# Default statistics target for table columns
# Higher values improve query planning but slow down ANALYZE
default_statistics_target = 100

# Cost of random page access relative to sequential access
# Lower value (1.0-1.5) for SSD, higher (4.0) for HDD
random_page_cost = 1.1

# Number of concurrent I/O operations that can be executed simultaneously
# Higher values for SSD storage
effective_io_concurrency = 200

# ============================================================================
# Checkpoint Configuration
# ============================================================================
# Target duration for checkpoint completion (0.0 to 1.0)
# Higher values spread checkpoint I/O over more time
checkpoint_completion_target = 0.9

# ============================================================================
# Parallel Query Configuration
# ============================================================================
# Maximum number of background worker processes
max_worker_processes = 1

# Maximum number of parallel workers per gather node
max_parallel_workers_per_gather = 0

# Maximum number of parallel workers that can be active at once
max_parallel_workers = 1

# ============================================================================
# Logging Configuration (Optional - uncomment if needed)
# ============================================================================
# log_destination = 'stderr'
# logging_collector = on
# log_directory = 'log'
# log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
# log_statement = 'mod'  # none, ddl, mod, all
# log_duration = off
# log_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '
# log_timezone = 'UTC'